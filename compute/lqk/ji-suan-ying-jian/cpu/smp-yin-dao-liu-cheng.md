系统的引导和初始化阶段是个特例，因为在这个阶段里系统中只有一个"上下文"，只能由一个处理器来处理。在这个阶段里，也就是在系统刚加电或"总清（reset）"之后，系统中暂时只有一个处理器运行，这个处理器称之为"引导处理器"BP;其余的处理器则处于暂停状态，称为"应用处理器"AP。"引导处理器"完成整个系统的引导和初始化，并创建起多个进程，从而可以由多个处理器同时参与处理时，才启动所有的"应用处理器"，让他们完成自身的初始化以后，投入运行。参考intel手册：

> MP 初始化协议定义了两类处理器：引导处理器 （BSP） 和应用处理器 （AP）。在 MP 系统通电或重置后，系统硬件动态选择系统总线上的一个处理器作为 BSP。其余处理器被指定为 AP。

* 我们在这里关心的是"引导处理器"怎样为各个"应用处理器"做好准备，然后启动其运行的过程。
* 在初始化阶段，引导处理器先完成自身的初始化，进入保护模式并开启页式存储管理机制，再完成系统特别是内存的初始化，然后从 –&gt; –&gt; –&gt;进行SMP系统的初始化。由于此时APs处于暂停状态，所以BP需要通过 –&gt;–&gt;–&gt;–&gt;发送IPI中断唤醒APs，这样APs就开始了正常的运行过程，拥有和BP一样的地位。详细过程我们后面分析。先来看总体大纲图：
  `start_kernel()rest_init()kernel_init()smp_init()smp_init()cpu_up()native_cpu_up()do_boot_cpu()wakeup_secondary_cpu_via_init()`

![](/assets/compute-hardware-cpu-smpboot1.png)



