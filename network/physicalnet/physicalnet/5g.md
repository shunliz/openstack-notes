# 5G 与 MEC 边缘计算

# 通信网络

电信网（即电话交换网络）由终端、传输和交换三大部分组成；因特网（即计算机互联网）由终端、传输、交换以及多个计算机网络等几部分组成。随着通信行业的快速发展，传统的电信网、计算机互联网与有线电视网的融合（三网融合）已经成为网络发展的趋势。三者融合发展，互联互通，为客户同时提供语音、数据和广播电视等多重服务。这里我们将其统一称之为通信网络。相对应的，通信网络由三大部分组成：接入网、承载网、核心网。

* 接入网是 “窗口”，负责把数据收上来；
* 承载网是 “卡车”，负责把数据送来送去；
* 核心网就是 “管理中枢”，负责管理这些数据，对数据进行分拣，然后告诉它，该去何方

![](/assets/network-hardwarenetwork-5G.png)

# 核心网演进之路

核心网（Core Network，简称 CN）或被成为骨干网（Backbone），本质就是对数据的处理和分发，即 “路由交换”。

## 早古时期

最早的时候，固定电话网的核心网，说白了就是把电线两头的电话连接起来，这种交换，非常简单，主要满足人们无线移动通话的需求。

![](/assets/network-hardwarenetwork-5g-early.png)

后来，用户数量越来越多，网络范围越来越大，开始有了分层。

![](/assets/network-hardwarenetwork-5g-later.png)

网络架构也复杂了，有了网络单元（Net Element，简称 NE，网元），是具有某种功能的网络单元实体。

同时，我们要识别和管理用户了，不是任何一个用户都允许用这个通信网络，只有被授权的合法用户，才能使用。于是，多了一堆和用户有关的网元设备。它们的核心任务只有三个：认证、授权和记账，简称 3A。

![](/assets/netowrk-hardwarenetwork-5g-3a.png)

再后来，有了无线通信，连接用户的方式变了，从电话线变成无线电波，无线接入网（RAN，Radio Access Network）诞生。接入网变了，核心网也要跟着变，于是有了无线核心网。再再后来，有了 2G、3G、4G。每一代通信标准，每一项具体制式，都有属于自己的网络架构，自己的硬件平台，自己的网元，自己的设备。

## 2G 网络架构

第二代蜂窝移动通信系统出现在数字蜂窝技术的发展与成熟之后，为了进一步提高通话的质量，推出了数字化语音业务的第二代蜂窝移动通信系统。 2G 的核心网设备如下，名字就叫 MSC（Mobile Switching Center，移动交换中心）。

![](/assets/network-hardwarenetwork-5g-2g1.png)

2G 的网络架构如下，组网非常简单，MSC 就是核心网的最主要设备。HLR、EIR 和用户身份有关，用于鉴权。

![](/assets/network-hardwarenetwork-5g-2g2.png)后来，到了 2.5G，在 2G 和 3G 之间，就是 GPRS。

![](/assets/network-hardwarenetwork-5g-2-5g.png)

在之前 2G 只能打电话发短信的基础上，有了 GPRS，就开始有了数据（上网）业务。于是，核心网的网络架构有了大变化，开始有了 PS（Packet Switch，分组交换，包交换）核心网。如下图红色部分，包含 SGSN（Serving GPRS Support Node，服务 GPRS 支持节点）和 GGSN（Gateway GPRS Support Node，网关 GPRS 支持节点）。SGSN 和 GGSN 都是为了实现 GPRS 数据业务。![](/assets/network-hardwarenetwork-5g-2-5g2.png)从 2000 年 GPRS 首商用到 2020 年 5G 到来，不禁为移动通信迅猛发展之势而感慨。数据速率从 2G GPRS 65Kbit/s 到 LTE-A 1Gbit/s，再到 5G 时代 10-20Gbit/s，增长速度令人吃惊。

## ![](/assets/network-hardwarenetwork-5g-2-5g3.png)3G 网络架构

20 世纪末，IP 和互联网技术的快速发展改变了人们的通信方式，传统的语音通信的吸引力下降，人们期望无线移动网络也能够提供互联网业务，于是出现了能够提供数据业务的第三代移动通信系统。

2.5G 到了 3G，网络结构变成了下图模样。而 3G 基站，由 RNC 和 BSC 组成。

![](/assets/network-hardwarenetwork-5g-3g1.png)到了 3G 阶段，设备商的硬件平台进行彻底变革升级。3G 的核心网设备如下：

![](/assets/network-hardwarenetwork-5g-3gcore.png)

3G 除了硬件变化和网元变化之外，还有两个很重要的思路变化。其中之一，就是 IP 化。以前是 TDM 电路，就是 E1 线，中继电路。粗重的 E1 线缆 IP 化，就是 TCP/IP，以太网。网线、光纤开始大量投入使用，设备的外部接口和内部通讯，都开始围绕 IP 地址和端口号进行。

第二个思路变化，就是分离。具体来说，就是网元设备的功能开始细化，不再是一个设备集成多个功能，而是拆分开，各司其事。在 3G 阶段，是分离的第一步，叫做承载和控制分离。在通信系统里面，说白了，就两个（平）面，用户面和控制面。如果不能理解两个面，就无法理解通信系统。

![](/assets/network-hardwarenetwork-5g-3g2.png)

* 用户面，就是用户的实际业务数据，就是你的语音数据，视频流数据之类的。

* 控制面，是为了管理数据走向的信令、命令。

这两个面，在通信设备内部，就相当于两个不同的系统，2G 时代，用户面和控制面没有明显分开。3G 时代，把两个面进行了分离。

![](/assets/network-hardwarenetwork-5g-3g3.png)从 R7 开始，通过 Direct Tunnel 技术将控制面和用户面分离，在 3G RNC 和 GGSN 之间建立了直连用户面隧道，用户面数据流量直接绕过 SGSN 在 RNC 和 GGSN 之间传输。到了 R8，出现了 MME 这样的纯信令节点。

![](/assets/network-hardwarenetwork-5g-3g4.png)

## 4G 网络架构

第四代移动通信系统提供了 3G 不能满足的无线网络宽带化。4G 网络是全 IP 化网络，主要提供数据业务，其数据传输的上行速率可达 20Mbit/s，下行速率高达 100Mbit/s，基本能够满足各种移动通信业务的需求。

4G 网络架构中，SGSN 变成 MME（Mobility Management Entity，移动管理实体），GGSN 变成 SGW/PGW（Serving Gateway，服务网关；PDN Gateway，PDN 网关），也就演进成了 4G 核心网，如下图。

MME（移动性管理实体）的主要功能是支持 NAS（非接入层）信令及其安全、跟踪区域（TA）列表的管理、PGW 和 SGW 的选择、跨 MME 切换时进行 MME 的选择、在向 2G/3G 接入系统切换过程中进行 SGSN 的选择、用户的鉴权、漫游控制以及承载管理、3GPP 不同接入网络的核心网络节点之间的移动性管理（终结于 S3 节点），以及 UE 在 ECM\_IDLE 状态下可达性管理（包括寻呼重发的控制和执行）。![](/assets/network-hardwarenetwork-5g-4g1.png)4G LTE 网络架构（注意，基站里面的 RNC 没有了，为了实现扁平化，功能一部分给了核心网，另一部分给了 eNodeB）。2009 年，在部署 LTE/EPC（4G 核心网）的时候，有人认为核心网演进之路已经走到尽头，继续突破创新实在太难，毕竟要掌控每小区峰值速率 150Mbps 的网络王国，实在是一件不容易的事。然而，随着 VoLTE 和 VoWiFi 的出现，LTE/EPC 又引入了 S2a、S2b 和 S2c 接口，这些接口将核心网的控制范围延伸到了非 3GPP 网络，即可信 Non-3GPP 接入（Non-3GPP Trusted Access）和非可信 Non-3GPP 接入（Non-3GPP untrusted Access）连接到 3GPP 网关 PGW。自此，核心网的构架如下图所示，图中绿色实线表示用户面 &控制面接口。

![](/assets/network-hardwarenetwork-5g-4g2.png)

演进到 4G 核心网之前，硬件平台也提前升级了。以中兴为例，开始启用 ATCA/ETCA 平台（后来 MME 就用了它），还有 xGW T8000 平台（后面 PGW 和 SGW 用了它，PGW/SGW 物理上是一体的）。

* ATCA（Advanced Telecom Computing Architecture，先进电信计算架构）机框
* ETCA（Enhanced ATCA，增强型 ATCA）
* xGW T8000 硬件平台其实就是一个大路由器

ATCA 里面的业务处理单板，本身就是一台单板造型的 “小型化电脑”，有处理器、内存、硬盘，我们俗称 “刀片”。

既然都走到这一步，原来的专用硬件，越做越像 IT 机房里面的 x86 通用服务器，那么，不如干脆直接用 x86 服务器吧。

长久以来，网络越来越庞大，越来越复杂，而那些专用的电信设备不但扩展不灵活，而且习惯了自扫门前雪，整体效率太低，如同公司的体制，这是一个庞大而臃肿的机构，仿佛背着世界前行。所以电信运营商要打破传统，用 IT 的方式来重构网络。而虚拟化打通了开源平台，让更多的第三方和合作伙伴参与进来，从而在已运行多年的成熟的电信网络上激发更多的创新和价值。这正是 NGMN 的愿景：生态、客户和商业模式。于是，网元功能虚拟化（Network Function Virtualization，NFV）的时代到来了。

![](/assets/network-hardwarenetwork-5g-4gnfv.png)

软件上，设备商基于 OpenStack 开发自己的虚拟化平台，把以前的核心网网元，“种植” 在这个平台之上。网元功能软件与硬件实体资源分离

![](/assets/network-hardwarenetwork-5g-4gnfv2.png)

设备商先在虚拟化平台部署 4G 核心网，也就是，在为后面 5G 做准备，提前实验。硬件平台，永远都会提前准备。

# ![](/assets/network-hardwarenetwork-5g-4gnfv3.png)5G

NGMN 是这样定义 5G 的：5G 是一个端到端的生态系统，它将打造一个全移动和全连接的社会。5G 主要包括三方面：生态、客户和商业模式。它交付始终如一的服务体验，通过现有的和新的用例，以及可持续发展的商业模式，为客户和合作伙伴创造价值。

比起 2/3/4G 时代主要局限于接入网和随之演进的核心网，更多聚焦于技术。5G 的野心是 “端到端” 的系统构架。从技术上讲，5G 还将实现电信也从未有过的软件和硬件分离，并引入 IT 数据中心所采用的云化和虚拟化的概念。简而言之，2/3/4G 是技术推动单调的服务和商业模式，而 5G 要运用各种技术去满足和支持持续变化的生态和商业模式。

如果说 4G 时代的智能终端技术全面促进了传统 PC 互联网同移动网络的深度融合，那么在 5G 时代，MEC 技术将会推动云计算平台同移动网络的融合，并可能在技术及商业生态上带来新一轮的变革和颠覆。 电信产业经历过辉煌，但如今跌入低谷，5G 将是电信产业重返辉煌的机会。

![](/assets/network-hardwarenetwork-5g-5g1.png)

##  5G 网络的需求

国际电信联盟（ITU，International Telecommunication Union）针对每一个新世代的网络，都会制定出需求及应用场景，而各大电信标准组织，再依照 ITU 所提出的需求，订定标准并向 ITU 提交标准，供 ITU 审订。5G 提交的标准为 IMT-2020（https://www.itu.int/en/ITU-R/study-groups/rsg5/rwp5d/imt-2020/Pages/default.aspx）。

ITU 在 IMT-2020 中订定了 5G 的八大 KPI（https://www.itu.int/en/ITU-D/Regional-Presence/ArabStates/Documents/events/2018/RDF/Workshop%20Presentations/Session1/5G-%20IMT2020-presentation-Marco-Carugi-final-reduced.pdf）：

1. 更好的使用者传输速率体验（User Experienced Data Rate）：100 Mb/s 以上
2. 更高的峰值传输速率（Peak Data Rate）：20Gb/s
3. 单位面积在单位时间内更高的传输数据量（Traffic Capacity）：10~100Mb/s/m2
4. 更高的频谱使用率（Spectrum Effiency）：3 倍以上
5. 更快的移动速度（Mobility）：500km/h
6. 更低的延迟（Latency）：1ms 以下
7. 更高密度的装置联机（Connection Dencity）：100 万 devices/km2
8. 更低的耗能（Network Energy Efficiency）：电力消耗为 1/100 以下

![](/assets/netowrk-hardwarenetwork-5g-5g2.png)

这八个 KPI 主要是要满足三大场景的应用：

1. eMBB（Enhanced Mobile Broadband，增强型移动宽带）：指的是更快速的传输速率以及更好的使用者上网体验，即解决人与人之间通信，人们上网的问题。
2. mMTC（Ultra-reliable and Low Latency Communications，海量物联网通信）： 指的是更大量、更密集的机器通信（每平方公里 100 万个以上的装置进行联机），即解决物联网的问题。
3. uRLLC（Massive Machine Type Communications，低时延、高可靠通信）：指的是更低的延迟，像是无人驾驶、工业自动化和远端医疗手术等应用。

要实现这样的愿景，5G 网络需要面临的技术挑战主要是：高速率、端到端时延、高可靠性、大规模连接、用户体验和效率。

![](/assets/network-hardwarenetwork-5g-5gkpi2.png)

## 5G 网络架构的设计原则

为了应对这这样的技术挑战，5G 网络设计原则为：

* 从集中化向分布式发展
* 从专用系统向虚拟系统发展
* 从闭源向开源发展

![](/assets/network-hardwarenetwork-5g-5gprin.png)

如果用四个词来概括 5G 网络的设计原则，它们是：解耦、软件化、开源化和云化。

* 解耦：软硬件解耦，控制面/用户面分离。
* 软件化：NFV、SDN、编排和网络切片。
* 开源：软硬件开源，前传、API 接口开放。
* 云化：从 CAPEX 向 OPEX 模式转型，虚拟化&DevOps 环境，动态 &自动化运维。

## 5G 网络的逻辑架构

![](/assets/network-hardwarenetwork-5g-5garch.png)

![](/assets/network-hardwarenetwork-5g-5garch2.png)

## 5G 核心网络的关键技术

由此，5G 核心网构架主要包含三大关键技术：SBA、CUPS 和网络切片，最终实现了化整为零、由硬变软的彻底演进。

![](/assets/network-hardwarenetwork-5g-5gcore2.png)

### SBA 基于服务的架构

SBA（Service Based Architecture，基于服务的架构），借鉴了 IT 领域的微服务架构（Microservices）理念，基于云原生（Cloud Native）构架的设计思想。同时，糅合了 NFV、网络切片（Network Slicing）及 Softwarization（software + -ization，软件虚拟化）的概念，将原本的网络功能（如 MME 中的 Mobility management、Authentication）虚拟化为 NF（Network Function，网络功能），使 5G 核心网变为更加的 灵活、可扩展（Extensible、Flexible）。

**注**：云原生的使命是改变世界如何构建软件，其主要由微服务架构、DevOps 和以容器为代表的敏捷基础架构几部分组成，目标是实现交付的弹性、可重复性和可靠性。

![](/assets/network-hardwarenetwork-5g-5gsba.png)

#### 微服务化

微服务就是指将单体式架构（Monolithic）拆分为多个粒度更小的微服务（Microservices），微服务之间通过 API 交互，且每个微服务独立于其他服务进行部署、升级、扩展，可在不影响客户使用的情况下频繁更新正在使用的应用。正是基于这样的设计理念，传统硬件网元设备先是虚拟化为 NF（网络功能），然后 NF 再被分解为多个 “网络功能服务”。

![](/assets/network-hardwarenetwork-5g-5gsvc.png)

传统硬件网元设备是一种紧耦合的黑盒设计，NFV（网络功能虚拟化）虽然从黑盒设备中解耦出 NF 软件，但解耦后的软件依然是个 “大块头” 的单体式构架，需进一步分解为细粒度化的模块化服务组件。所以，从单体式架构到微服务架构的演变，会有一个明显的外在表现，就是网元大量增加了。微服务之间通过开放 API 接口来实现集成，以提升应用开发的整体敏捷性和弹性。

**微服务化后的 5G 网络架构**：

![](/assets/network-hardwarenetwork-5g-5gsvc2.png)**5G 网络的 VNF（虚拟网络功能）清单**：

* **AMF（Core Access and Mobility Management Function，接入与移动性管理）**
  ：类似 4G EPC 网元中的 MME、SGW-C、PGW-C 和 Mobility 相关的 Function。
* **SMF（Session Management Function，会话管理）**
  ：类似 4G EPC 网元中的 MME、SGW-C、PGW-C 和 Session 相关的 Function。
* **UPF（User plane Function，用户平面功能）**
  ：等同于 CUPS 后的 SGW-U 和 PGW-U，主要用于 Data 的传输。
* **UDM（Unified Data Management，统一数据管理）**
  ：包含了 UDR（Unified Data Repository）和 FE（Front End）。UDR 的功能类似于 4G EPC 网元中的 HSS，用于储存用户和管理用户资料，而 FE 的功能则是一个存取 UDR 数据的前端。
* **PCF（Policy Control function，策略控制功能）**
  ：类似 4G EPC 网元中的 PCRF（Policy and Charging Function），主要用于计费等。
* **AUSF（Authentication Server Function，认证服务器功能）**
  ：用于处理认证的过程，类似 4G EPC 网元中 HSS 负责用户认证（Authentication）的部分。
* **NEF（Network Exposure Function，网络能力开放）**
  ：类似 4G EPC 网元中的 SCEF（Service Capability Exposure Function），就是允许外部元件（or AF）存取部分 UE 信息、改变 UE 的行为等。
* **NSSF（Network Slice Selection Function，网络切片选择功能）**
  ：主要的功能为决定一个连上来的 UE，应该使用哪些服务，进而决定由哪个 AMF 服务这个 UE，这边的辨别，依照的是 NSSAI（Network Slice Selection Assistance Information）。
* **NRF（NF Repository Function，网络注册功能）**
  ：提供一个 NF 之间沟通的桥梁，例如某一个 NF 想要知道另一个（含有特定信息/功能的）NF 是否存在以及使用该 NF 或是取得该 NF 中的信息。
* **AF（Application Function）**
  ：可以利用 SBA 中的 NF，例如用户资料、计费方式等等，设计服务/APP，用于提供客户/UE Service，类似于 SDN Controller 上的 APP。
* **®AN/\(Radio\) Access Network**
  ：等同于 LTE 里的 eNodeB。
* **DN（Data network）**
  ：比如运营商服务、互联网接入和三方服务。
* **UE（User Equipment）**
* **SDSF（Structured Data Storage network function）**
* **UDSF（Unstructured Data Storage network function）**

**注**：在 TS 23.335 中，有提到 UDC（User Data Convergence），主要是将 UDM、AUSF 和 PCF 这三个和用户资料、计费相关的元件整合为 UDC，用以确保数据的一致性和降低 Control Plane 中重复的 Signaling。

这些网元看上去很多，实际上，硬件都是在虚拟化平台里面虚拟出来的。这样一来，非常容易扩容、缩容，也非常容易升级、割接，相互之间不会造成太大影响。这个 5G 核心网基础构架正是基于云原生的微服务构架设计原则，以模块化、软件化的构建方式来构架 5G 核心网，以高效执行不同服务类型的网络切片。我们看到上图中网络节点名称后面都带有 Function（功能），这些功能是基于软件化的，以便动态灵活调整网络。

#### 基于服务的接口

SBI（Service Based Interface，基于服务的接口）所使用的 Protocol 如下图：

![](/assets/network-hardwarenetwork-5g-5gspi.png)

* HTTP/2 adopted as the application layer protocol for the service based interfacesTCP adopted as the transport layer protocol;
* Use of QUIC, binary encoding \(e.g. CBOR\) and other aspects are left FFS for possible support in future releases;
* JSON adopted as the serialization protocol;
* REST-style service design whenever possible and custom \(RPCbased\) methods otherwise.

回过头来看 3GPP 于 TS 23.501 中订定 5G SBA 构架：**SBA = 网络功能服务 + 基于服务的接口**。

![](/assets/network-hardwarenetwork-5g-5gsba2.png)

其中 NF 可由多个模块化的 “网络功能服务” 组成，并通过 “基于服务的接口” 来展现其功能，因此 “网络功能服务” 可以被授权的 NF 灵活使用。其中，NRF（NF Repository Function，NF 贮存功能）支持网络功能服务注册登记、状态监测等，实现网络功能服务自动化管理、选择和可扩展。

![](/assets/network-hardwarenetwork-5g-5gcpus.png)

在 SBA 的构架中，任何 NF 可以分为 Producer 和 Consumer，而 NRF（Network Function Repository Function，NF 注册功能） 则做为协调者的角色，如上述例子，当一个新的 NF（Producer）加入时，这个 NF（Producer）会向 NRF 进行注册，而当有ㄧ个 NF（Consumer）需要使用一个 NF（Producer）时，则它会向 NRF 询问是否有这个 NF（Producer）存在，而这个 NF（Producer）是否是它可以被允许（由 NRF 决定）使用的，假设这个 NF 存在，NRF 也授权它（Consumer）使用，则它才向那个 NF（Producer）提出使用此一 NF（Producer）的请求，并在此一 NF（Producer）授权之后进行使用。

![](/assets/network-hardwarenetwork-5g-5gspu.png)

### CUPS 控制与用户面分离

为了摆脱专用硬件，增加 Operator 在服务的扩增和传输设备扩建上的弹性，降低 CAPEX 以及 OPEX，在现有的核心网络中引进了 SDN 将控制面（Control Plane）和数据面（Data Plane）进行分离的概念。事实上，核心网一直也都在沿着控制面和用户面分离的方向演进。到了 4.5G 和 5G 时代，这一分离的趋势更加彻底，也更加必要。其中一大原因就是，为了满足 5G 网络毫秒级时延的 KPI。

![](/assets/network-hardwarenetwork-5g-5gsdn1.png)

这就是 CUPS（Control and User Plane Separation，控制与用户面分离），又称 “杯子式”（Cups）网络构架，目的是让网络用户面功能摆脱 “中心化” 的囚禁，使其既可灵活部署于核心网（中心数据中心），也可部署于接入网（边缘数据中心），最终实现可分布式部署。这就是所谓的核心网用户面下沉。同时，也保留了控制面功能的中心化。

2017 年 R14 阶段，3GPP 将再次向分离式的核心网构架演进之路出发。可以把它叫 “全分离式” 的网络构架。在 “全分离式” 构架下，SGW 和 PGW 被分离为控制面和用户面两部分（如下图黄色填充部分，SGW分 离为 SGW-C 和 SGW-U，PGW 分离为 PGW-C 和 PGW-U），同样，SGSN 也被分离为控制面（SGSN-C）和用户面（SGSN-U）。

![](/assets/network-hardwarenetwork-5g-5gsdn2.png)

5G 时代，高清视频、VR/AR 等应用必然给网络带来超大数据流量，这不但给回传带来沉重负担，而且对核心网集中处理能力也是挑战，只能核心网的用户面下沉，从集中式向分布式演进。

另外，对于毫秒级的 5G 时延，核心网的用户面下沉与分布式架构也是一个必然的选择。光纤传播速度为 200km/ms，数据要在相距几百公里以上的终端和核心网之间来回传送，显然是无法满足 5G 毫秒级时延的。物理距离受限，这是硬伤。因此，需将内容下沉和分布式的部署于接入网侧（边缘数据中心），使之更接近用户，降低时延和网络回传负荷。

![](/assets/network-hardwarenetwork-5g-5gcdn.png)

低时延同时也会带来小区的蓬勃生长。并不只是因为 5G 高频段覆盖范围小才不得不考虑小区，其实时延也需要小区。小区越小，相对于宏站，意味着小区无线环境越简单、干净，这可以降低由于恶劣的无线环境带来的重传问题，在高可靠、低时延的 5G 应用中同样重要。

除了降低时延，这样的构架也附送了另一个好处，将更多的互联网内容揽入电信网络的怀抱中。低时延将使得电信网络掌握更多内容控制权，这种内容控制权依赖基于 MEC 在接入网侧的内容感知，比如对 GTP-U 数据流的解析，这加强了网络对业务内容的理解，真正实现智能管道。电信产业经历过辉煌，但如今跌入低谷，5G 将是电信重返辉煌的机会。

LTE 网络内部时延是小于 20ms，如果 Ping 外部服务器还不考虑重传，这个时延通常在 40-50ms 以上。光纤的传播速度是 200km/ms，5G 在应对时延超敏感用例时要求接入网时延不超过 0.5ms，这就意味着 5G 中心机房（数据中心）与 5G 小区（基站）之间的物理距离不能超过 50 公里。面对物理时延的挑战，我们不得不考虑在接入网引入移动边缘计算（MEC）、边缘数据中心，也就是将以前核心网和应用网的一些功能下沉到接入网。

![](/assets/network-hardwarenetwork-5g-5gsink.png)尽管这种从中心化向分布式系统的演进和电信网络一直秉承的中心化概念是背道而驰的，但是别无选择。

### 网络切片

5G 服务是多样化的，包括车联网、大规模物联网、工业自动化、远程医疗、VR/AR 等等。多种类型的业务和多样化的通信场景对 5G 网络提出了多样化的性能需求。这些服务对网络的要求是不一样的，比如工业自动化要求低时延、高可靠但对数据速率要求不高；高清视频无需超低时延但要求超高速率；而这些多样化的性能需求显然无法通过统一的网络架构来保证， 因此 5G 网络需具备虚拟化切片的能力 ，使得每个网络切片能够适配不同的业务和通信场景，以提供合理的网络控制和高效的资源利用。

网络切片技术与 MEC 技术并称 5G 网络的两大关键技术。网络切片是指将物理网络通过虚拟化技术分割为多个相互独立的虚拟网络，每个虚拟网络被称为一个网络切片， 每个网络切片中的网络功能可以在定制化的裁剪后，通过动态的网络功能编排形成一个完整的实例化的网络架构。 通过为不同的业务和通信场景创建不同的网络切片，使得网络可以根据不同的业务特征采用不同的网络架构和管理机制，包括合理的资源分配方式、控制管理机制和运营商策略，从而保证通信场景中的性能需求，提 高用户体验以及网络资源的高效利用，例如在超密集场景下引入本地化的控制管理机制和数据传输机制，降低网络中的信令开销和传输路径的跳数。

其实说白了，就是人类上网需要很快的网速，车联网、VR/AR 需要很低的延时，智能抄表这样的物联网，需要更大的覆盖和更多的连接。5G 网络，统统都要满足。

可见，这么灵活的切片工作岂是传统大块头的黑盒设备能担当的。以一个死板的固定网络结构去应对，肯定是不行的。只有拆分成模块，灵活组队，才能搞定。显然，就要虚拟化、软件化，再将网络功能进一步细粒度模块化，才能实现灵活组装业务应用。因此，3GPP 就确认了由中国移动牵头 26 家公司提出的 SBA 构架为 5G 核心网基础构架。

![](/assets/network-hardwarenetwork-5g-5g3gpp.png)

#### 控制面

控制面被分为 AMF 和 SMF。单一的 AMF 负责终端的移动性和接入管理；SMF 负责对话管理功能，可以配置多个。基于灵活的微服务构架的 AMF 和 SMF 对应不同的网络切片。

![](/assets/network-hardwarenetwork-5g-5gctrl.png)

AMF 和 SMF 是控制面的两个主要节点，配合它俩的还有 UDM、AUSF、PCF，以执行用户数据管理、鉴权、策略控制等。另外还有 NEF 和 NRF 这两个平台支持功能节点，用于帮助 Expose 和 Publish 网络数据，以及帮助其他节点发现网络服务。

#### 用户面

5G 核心网的用户面由 UPF（用户面功能）节点掌控大局，UPF 也代替了原来 4G 中执行路由和转发功能的 SGW 和 PGW。4G 核心网中的 MME、SGW 和 PGW 消失了。4G 中 MME 的功能被分解到 AMF（接入和移动管理功能）和 SMF（会话管理功能）中，SGW 和 PGW 被 UPF 替代。

![](/assets/network-hardwarenetwork-5g-5guser.png)



